<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.dreamstart.mapper.UserMapper">
	<!-- UserDTO UserRoleDTO RoleDTO AdminActionLogDTO OauthProviderDTO EmailVErificationTokenDTO -->
	<!-- 회원 정보 -->
	<resultMap type="UserDTO" id="userMap">
		<id column="user_id" property="userId" />
		<result column="user_name" property="userName" />
		<result column="password" property="password" />
		<result column="name" property="name" />
		<result column="email" property="email" />
		<result column="phone" property="phone" />
		<result column="status" property="status" />
		<result column="last_login_at" property="lastLoginAt" />
		<result column="created_at" property="createdAt" />
		<result column="updated_at" property="updatedAt" />
		<result column="id_active" property="isActive" />
	</resultMap>

	<!-- 회원권한 -->
	<resultMap type="UserRoleDTO" id="userRoleMap">
		<id column="user_id" property="userId" />
		<id column="role_id" property="roleId" />
		<result column="assigned_at" property="assignedAt" />
	</resultMap>

	<!-- 권한 -->
	<resultMap type="RoleVO" id="roleMap">
		<id column="role_id" property="roleId" />
		<result column="role_name" property="roleName" />
	</resultMap>

	<!-- 관리자 활동 로그 -->
	<resultMap type="AdminActionLogDTO" id="adminActionLogMap">
		<id column="log_id" property="logId" />
		<result column="admin_id" property="adminId" />
		<result column="target_type" property="targetType" />
		<result column="target_id" property="targetId" />
		<result column="action" property="action" />
		<result column="reason" property="reason" />
		<result column="created_at" property="createdAt" />
	</resultMap>

	<select id="userSelectAll" resultMap="userMap">
		select * from `user`
	</select>

	<select id="userCount" resultType="int">
		select count(*) from `user`
	</select>

	<select id="userPagingList" resultMap="userMap">
		select *
		from user
		limit #{page},#{perPageNum}
	</select>
	<!-- <select id="userRoleSelectAll" resultMap="userMap"> select * from `user_role` 
		</select> <select id="roleSelectAll" resultMap="roleMap"> select * from `role` 
		</select> <select id="adminActionAll" resultMap="adminActionLogMap"> select 
		* from `admin_action_log` </select> -->
</mapper>
